{# Lecture title with inline edit functionality #}
<span class="lecture-title-display">
    {{ lecture.title }}
    <button type="button"
            onclick="editLectureTitle({{ lecture.id }})"
            class="ml-2 text-gray-400 hover:text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity"
            title="Rename lecture">
        <i class="fa-solid fa-pen text-xs"></i>
    </button>
</span>
<form id="lecture-title-form-{{ lecture.id }}"
      class="lecture-title-form hidden inline-flex items-center gap-2"
      hx-post="{% url 'api:rename_lecture' lecture.id %}"
      hx-target="#lecture-title-{{ lecture.id }}"
      hx-swap="innerHTML"
      onclick="event.stopPropagation()"
      onkeydown="event.stopPropagation()">
    {% csrf_token %}
    <input type="text"
           name="title"
           value="{{ lecture.title }}"
           class="px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
           required
           onclick="event.stopPropagation()"
           onkeydown="event.stopPropagation()">
    <button type="submit"
            class="text-green-600 hover:text-green-800"
            title="Save"
            onclick="event.stopPropagation()">
        <i class="fa-solid fa-check"></i>
    </button>
    <button type="button"
            onclick="cancelEditLectureTitle({{ lecture.id }})"
            class="text-red-600 hover:text-red-800"
            title="Cancel">
        <i class="fa-solid fa-xmark"></i>
    </button>
</form>

<script>
function editLectureTitle(lectureId) {
    event.stopPropagation();
    const display = document.querySelector(`#lecture-title-${lectureId} .lecture-title-display`);
    const form = document.querySelector(`#lecture-title-form-${lectureId}`);
    const input = form.querySelector('input[name="title"]');
    
    display.classList.add('hidden');
    form.classList.remove('hidden');
    input.focus();
    input.select();
}

function cancelEditLectureTitle(lectureId) {
    event.stopPropagation();
    const display = document.querySelector(`#lecture-title-${lectureId} .lecture-title-display`);
    const form = document.querySelector(`#lecture-title-form-${lectureId}`);
    
    form.classList.add('hidden');
    display.classList.remove('hidden');
}
</script>
